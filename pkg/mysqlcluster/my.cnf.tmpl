[mysqld]
; server id

; utility user
utility_user = {{ .UtilityUser }}
utility_user_password = {{ .UtilityUserPass }}
utility_user_schema_access = mysql
utility_user_privileges = SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,RELOAD,SHUTDOWN,PROCESS,FILE,GRANT,REFERENCES,INDEX,ALTER,SHOW DATABASES,SUPER,LOCK TABLES,EXECUTE,REPLICATION SLAVE,REPLICATION CLIENT,CREATE VIEW,SHOW VIEW,CREATE ROUTINE,ALTER ROUTINE,CREATE USER,EVENT,TRIGGER,CREATE TABLESPACE

; common configs for master and slaves
default-storage-engine = InnoDB
gtid-mode = on
enforce-gtid-consistency = on

; specific configs
;{{ if .Master }}
log-bin = /var/lib/mysql/mysql-bin
;{{ else }}
super-read-only = on
; Crash safe
relay-log-info-repository = TABLE
relay-log-recovery = on
;{{ end }}


; mysql client configs
[client]
host = 127.0.0.1
port = 3306
user = {{ .UtilityUser }}
pass = {{ .UtilityUserPass }}